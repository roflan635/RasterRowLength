#include "pch.h"
#include "Task.h"
#include <map>
using namespace std;


TEST(TestTask, Check1BitImages) {
	map<int, int> data{
		{0,0}, {1, 4}, {2, 4},{3, 4}, {4,4}, {5,4},{6,4}, {7,4},{8,4},
		{9,4}, {10, 4}, {11, 4},{12, 4}, {13,4}, {14,4},{15,4}, {16,4},
		{17,4}, {18, 4}, {19, 4},{20, 4}, {21,4}, {22,4},{23,4}, {24,4},
		{25,4}, {26, 4}, {27, 4},{28, 4}, {29,4}, {30,4},{31,4}, {32,4},
		{33,8}, {64, 8}, {65, 12},{128, 16}, {129,20}, {256,32},{257,36},
	};
	for (auto &w : data)
	{
		int len = GetRasterRowLength(w.first, 1);
		EXPECT_EQ(len, w.second);
	}
}

TEST(TestTask, Check4BitImages) {
	map<int, int> data{
		{0,0}, {1, 4}, {2, 4},{3, 4}, {4,4}, {5,4},{6,4}, {7,4},{8,4},
		{9,8}, {10, 8}, {11, 8},{12, 8}, {13,8}, {14,8},{15,8}, {16,8},
		{17,12}, {18, 12}, {19, 12},{20, 12}, {21,12}, {22,12},{23,12}, {24,12},
		{25,16}, {26, 16}, {27, 16},{28, 16}, {29,16}, {30,16},{31,16}, {32,16},
		{33,20}, {64, 32}, {65, 36},{128, 64}, {129,68}, {256,128},{257,132},
	};
	for (auto& w : data)
	{
		int len = GetRasterRowLength(w.first, 4);
		EXPECT_EQ(len, w.second);
	}
}

TEST(TestTask, Check8BitImages) {
	map<int, int> data{
		{0,0}, {1, 4}, {2, 4},{3, 4}, {4,4}, {5,8},{6,8}, {7,8},{8,8},
		{9,12}, {10, 12}, {11, 12},{12, 12}, {13,16}, {14,16},{15,16}, {16,16},
		{17,20}, {18, 20}, {19, 20},{20, 20}, {21,24}, {22,24},{23,24}, {24,24},
		{25,28}, {26, 28}, {27, 28},{28, 28}, {29,32}, {30,32},{31,32}, {32,32},
		{33,36}, {64, 64}, {65, 68},{128, 128}, {129,132}, {256,256},{257,260},
	};
	for (auto& w : data)
	{
		int len = GetRasterRowLength(w.first, 8);
		EXPECT_EQ(len, w.second);
	}
}

TEST(TestTask, Check24BitImages) {
	map<int, int> data{
		{0,0}, {1, 4}, {2, 8},{3, 12}, {4,12}, {5,16},{6,20}, {7,24},{8,24},
		{9,28}, {10, 32}, {11, 36},{12, 36}, {13,40}, {14,44},{15,48}, {16,48},
		{17,52}, {18, 56}, {19, 60},{20, 60}, {21,64}, {22,68},{23,72}, {24,72},
		{25,76}, {26, 80}, {27, 84},{28, 84}, {29,88}, {30,92},{31,96}, {32,96},
		{33,100}, {64, 192}, {65, 196},{128, 384}, {129,388}, {256,768},{257,772},
	};
	for (auto& w : data)
	{
		int len = GetRasterRowLength(w.first, 24);
		EXPECT_EQ(len, w.second);
	}
}

TEST(TestTask, CheckInvalidParams) {
	int len = GetRasterRowLength(-1, 17);
	EXPECT_EQ(len, -1);
}